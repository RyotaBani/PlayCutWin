<Window x:Class="PlayCutWin.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Play Cut"
        Width="1400" Height="860"
        MinWidth="1180" MinHeight="720"
        WindowStartupLocation="CenterScreen"
        Background="#1A1A1A">

    <Window.Resources>
        <!-- ===== Colors ===== -->
        <SolidColorBrush x:Key="PanelBg" Color="#232323"/>
        <SolidColorBrush x:Key="PanelBorder" Color="#333333"/>
        <SolidColorBrush x:Key="BtnBg" Color="#2B2B2B"/>
        <SolidColorBrush x:Key="BtnBorder" Color="#3A3A3A"/>
        <SolidColorBrush x:Key="Accent" Color="#3B82F6"/>

        <!-- ===== Panel ===== -->
        <Style TargetType="Border" x:Key="Panel">
            <Setter Property="Background" Value="{StaticResource PanelBg}"/>
            <Setter Property="BorderBrush" Value="{StaticResource PanelBorder}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="CornerRadius" Value="16"/>
            <Setter Property="Padding" Value="14"/>
            <Setter Property="SnapsToDevicePixels" Value="True"/>
        </Style>

        <!-- ===== Buttons ===== -->
        <Style TargetType="Button">
            <Setter Property="Background" Value="{StaticResource BtnBg}"/>
            <Setter Property="BorderBrush" Value="{StaticResource BtnBorder}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Foreground" Value="#EAEAEA"/>
            <Setter Property="Padding" Value="12,7"/>
            <Setter Property="Margin" Value="6,0,0,0"/>
            <Setter Property="MinWidth" Value="86"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="10">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="BorderBrush" Value="#4A4A4A"/>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter Property="Opacity" Value="0.45"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Accent button -->
        <Style TargetType="Button" x:Key="AccentButton" BasedOn="{StaticResource {x:Type Button}}">
            <Setter Property="Background" Value="{StaticResource Accent}"/>
            <Setter Property="BorderBrush" Value="{StaticResource Accent}"/>
            <Setter Property="Foreground" Value="White"/>
        </Style>

        <!-- ===== Toggle Buttons (Tags) ===== -->
        <Style TargetType="ToggleButton" x:Key="TagToggle">
            <Setter Property="Background" Value="{StaticResource BtnBg}"/>
            <Setter Property="BorderBrush" Value="{StaticResource BtnBorder}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Foreground" Value="#EAEAEA"/>
            <Setter Property="Padding" Value="10,6"/>
            <Setter Property="Margin" Value="6,6,0,0"/>
            <Setter Property="MinWidth" Value="90"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ToggleButton">
                        <Border Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="10">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsChecked" Value="True">
                                <Setter Property="BorderBrush" Value="{StaticResource Accent}"/>
                                <Setter Property="Background" Value="#1A2233"/>
                            </Trigger>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="BorderBrush" Value="#4A4A4A"/>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter Property="Opacity" Value="0.45"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style TargetType="TextBox">
            <Setter Property="Background" Value="#202020"/>
            <Setter Property="Foreground" Value="#EAEAEA"/>
            <Setter Property="BorderBrush" Value="#333333"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="8,6"/>
            <Setter Property="Margin" Value="0,0,8,0"/>
        </Style>

        <Style TargetType="ComboBox">
            <Setter Property="Background" Value="#202020"/>
            <Setter Property="Foreground" Value="#EAEAEA"/>
            <Setter Property="BorderBrush" Value="#333333"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="6,4"/>
            <Setter Property="Margin" Value="0,0,8,0"/>
        </Style>

        <Style TargetType="Slider">
            <Setter Property="Margin" Value="0,8,0,8"/>
        </Style>
    </Window.Resources>

    <!-- ===== Main Layout ===== -->
    <Grid Margin="12">
        <!-- Mac寄せ比率：上:下=3:2 / 左:右=5:4 -->
        <Grid.RowDefinitions>
            <RowDefinition Height="3*"/>
            <RowDefinition Height="2*"/>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="5*"/>
            <ColumnDefinition Width="4*"/>
        </Grid.ColumnDefinitions>

        <!-- =======================
             Top-Left: VIDEO
             ======================= -->
        <Border Grid.Row="0" Grid.Column="0" Style="{StaticResource Panel}" Margin="0,0,10,10">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <!-- header row -->
                <DockPanel Grid.Row="0" LastChildFill="True" Margin="0,0,0,10">
                    <TextBlock Text="Video (16:9)" Foreground="#EAEAEA" FontWeight="SemiBold" FontSize="14" DockPanel.Dock="Left"/>

                    <StackPanel Orientation="Horizontal" DockPanel.Dock="Right">
                        <TextBlock Text="Team A" Foreground="#AAAAAA" Margin="0,0,6,0" VerticalAlignment="Center"/>
                        <TextBox x:Name="TeamAText" Width="160" Text="Home / Our Team" />

                        <TextBlock Text="Team B" Foreground="#AAAAAA" Margin="12,0,6,0" VerticalAlignment="Center"/>
                        <TextBox x:Name="TeamBText" Width="160" Text="Away / Opponent" />
                    </StackPanel>
                </DockPanel>

                <!-- Player Area -->
                <Grid Grid.Row="1">
                    <Border CornerRadius="12" Background="#101010" BorderBrush="#2A2A2A" BorderThickness="1">
                        <Grid>
                            <MediaElement x:Name="Player"
                                          LoadedBehavior="Manual"
                                          UnloadedBehavior="Manual"
                                          Stretch="Uniform"
                                          MediaOpened="Player_MediaOpened"
                                          MediaEnded="Player_MediaEnded"/>
                            <!-- ★ VideoHint を必ず定義（Actionsの VideoHint エラー潰し） -->
                            <TextBlock x:Name="VideoHint"
                                       Text="Load video from the button →"
                                       Foreground="#777777"
                                       HorizontalAlignment="Center"
                                       VerticalAlignment="Center"
                                       FontSize="14"/>
                        </Grid>
                    </Border>
                </Grid>
            </Grid>
        </Border>

        <!-- =======================
             Top-Right: CLIPS
             ======================= -->
        <Border Grid.Row="0" Grid.Column="1" Style="{StaticResource Panel}" Margin="0,0,0,10">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- Header: title + controls (wrap to avoid cutting) -->
                <Grid Grid.Row="0" Margin="0,0,0,10">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <TextBlock Grid.Column="0"
                               Text="Clips (Total 0)"
                               Foreground="#EAEAEA"
                               FontWeight="SemiBold"
                               FontSize="14"
                               VerticalAlignment="Center"/>

                    <ComboBox Grid.Column="1" x:Name="ClipFilterCombo" Margin="10,0,10,0" VerticalAlignment="Center" MinWidth="120">
                        <ComboBoxItem Content="All Clips" IsSelected="True"/>
                        <ComboBoxItem Content="Team A"/>
                        <ComboBoxItem Content="Team B"/>
                    </ComboBox>

                    <!-- ★ ここを WrapPanel にして「Load Video が切れない」 -->
                    <WrapPanel Grid.Column="2" HorizontalAlignment="Right" VerticalAlignment="Center">
                        <Button Content="Import CSV" Click="ImportCsv_Click"/>
                        <Button Content="Export CSV" Click="ExportCsv_Click"/>
                        <Button Content="Export All" Click="ExportAll_Click"/>
                        <Button Content="Load Video" Style="{StaticResource AccentButton}" Click="LoadVideo_Click"/>
                    </WrapPanel>
                </Grid>

                <!-- Lists -->
                <Grid Grid.Row="1">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="1*"/>
                        <ColumnDefinition Width="1*"/>
                    </Grid.ColumnDefinitions>

                    <Border Grid.Column="0" Background="#101010" BorderBrush="#2A2A2A" BorderThickness="1" CornerRadius="12" Padding="10" Margin="0,0,8,0">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>
                            <TextBlock Text="Team A Clips (0)" Foreground="#CFCFCF" FontWeight="SemiBold" Margin="0,0,0,8"/>
                            <DataGrid Grid.Row="1" x:Name="TeamAClipsGrid" AutoGenerateColumns="False" HeadersVisibility="Column"
                                      Background="#101010" Foreground="#EAEAEA" BorderBrush="#2A2A2A">
                                <DataGrid.Columns>
                                    <DataGridTextColumn Header="Start" Binding="{Binding Start}"/>
                                    <DataGridTextColumn Header="End" Binding="{Binding End}"/>
                                </DataGrid.Columns>
                            </DataGrid>
                        </Grid>
                    </Border>

                    <Border Grid.Column="1" Background="#101010" BorderBrush="#2A2A2A" BorderThickness="1" CornerRadius="12" Padding="10">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>
                            <TextBlock Text="Team B Clips (0)" Foreground="#CFCFCF" FontWeight="SemiBold" Margin="0,0,0,8"/>
                            <DataGrid Grid.Row="1" x:Name="TeamBClipsGrid" AutoGenerateColumns="False" HeadersVisibility="Column"
                                      Background="#101010" Foreground="#EAEAEA" BorderBrush="#2A2A2A">
                                <DataGrid.Columns>
                                    <DataGridTextColumn Header="Start" Binding="{Binding Start}"/>
                                    <DataGridTextColumn Header="End" Binding="{Binding End}"/>
                                </DataGrid.Columns>
                            </DataGrid>
                        </Grid>
                    </Border>
                </Grid>

                <TextBlock Grid.Row="2" Text="Tag Stats: No clips yet." Foreground="#777777" Margin="0,10,0,0"/>
            </Grid>
        </Border>

        <!-- =======================
             Bottom-Left: CONTROLS
             ======================= -->
        <Border Grid.Row="1" Grid.Column="0" Style="{StaticResource Panel}" Margin="0,0,10,0">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <TextBlock Text="Controls" Foreground="#EAEAEA" FontWeight="SemiBold" FontSize="14" />

                <TextBlock Grid.Row="1" Text="Load a video to show the timeline slider here."
                           Foreground="#777777" Margin="0,8,0,0"/>

                <Slider Grid.Row="2" x:Name="TimelineSlider" Minimum="0" Maximum="1" Value="0"/>

                <StackPanel Grid.Row="3" Orientation="Vertical" Margin="0,6,0,0">
                    <TextBlock Text="Playback Speed" Foreground="#AAAAAA" Margin="0,0,0,6"/>
                    <StackPanel Orientation="Horizontal">
                        <Button Content="0.25x" Click="Speed025_Click" Margin="0,0,6,0"/>
                        <Button Content="0.5x" Click="Speed05_Click" Margin="0,0,6,0"/>
                        <Button Content="1x" Click="Speed1_Click" Margin="0,0,6,0"/>
                        <Button Content="2x" Click="Speed2_Click"/>
                    </StackPanel>

                    <StackPanel Orientation="Horizontal" Margin="0,10,0,0">
                        <Button Content="-5s" Click="SeekMinus5_Click" Margin="0,0,6,0"/>
                        <Button Content="-1s" Click="SeekMinus1_Click" Margin="0,0,6,0"/>
                        <Button Content="Play" Style="{StaticResource AccentButton}" Click="PlayPause_Click" Margin="0,0,6,0"/>
                        <Button Content="+1s" Click="SeekPlus1_Click" Margin="0,0,6,0"/>
                        <Button Content="+5s" Click="SeekPlus5_Click"/>
                    </StackPanel>

                    <TextBlock Text="Clip Range" Foreground="#AAAAAA" Margin="0,14,0,6" FontWeight="SemiBold"/>

                    <StackPanel Orientation="Horizontal">
                        <Button Content="Clip START" Click="ClipStart_Click" Margin="0,0,6,0"/>
                        <Button Content="Clip END" Click="ClipEnd_Click" Margin="0,0,6,0"/>
                        <Button Content="Save Team A" Click="SaveTeamA_Click" Margin="0,0,6,0"/>
                        <Button Content="Save Team B" Click="SaveTeamB_Click"/>
                    </StackPanel>

                    <TextBlock x:Name="StatusText" Text="Ready" Foreground="#777777" Margin="0,10,0,0"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- =======================
             Bottom-Right: TAGS
             ======================= -->
        <Border Grid.Row="1" Grid.Column="1" Style="{StaticResource Panel}">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <DockPanel Margin="0,0,0,10">
                    <TextBlock Text="Tags" Foreground="#EAEAEA" FontWeight="SemiBold" FontSize="14" DockPanel.Dock="Left"/>
                    <Button Content="Preferences..." DockPanel.Dock="Right" Click="Preferences_Click"/>
                </DockPanel>

                <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
                    <StackPanel>
                        <TextBlock Text="Offense Tags" Foreground="#AAAAAA" Margin="0,0,0,6"/>
                        <WrapPanel>
                            <ToggleButton Style="{StaticResource TagToggle}" Content="Transition"/>
                            <ToggleButton Style="{StaticResource TagToggle}" Content="Set"/>
                            <ToggleButton Style="{StaticResource TagToggle}" Content="PnR"/>
                            <ToggleButton Style="{StaticResource TagToggle}" Content="BLOB"/>
                            <ToggleButton Style="{StaticResource TagToggle}" Content="SLOB"/>
                            <ToggleButton Style="{StaticResource TagToggle}" Content="vs M/M"/>
                            <ToggleButton Style="{StaticResource TagToggle}" Content="vs Zone"/>
                            <ToggleButton Style="{StaticResource TagToggle}" Content="2nd Attack"/>
                            <ToggleButton Style="{StaticResource TagToggle}" Content="3rd Attack more"/>
                        </WrapPanel>

                        <TextBlock Text="Defense Tags" Foreground="#AAAAAA" Margin="0,14,0,6"/>
                        <WrapPanel>
                            <ToggleButton Style="{StaticResource TagToggle}" Content="M/M"/>
                            <ToggleButton Style="{StaticResource TagToggle}" Content="Zone"/>
                            <ToggleButton Style="{StaticResource TagToggle}" Content="Rebound"/>
                            <ToggleButton Style="{StaticResource TagToggle}" Content="Steal"/>
                        </WrapPanel>

                        <TextBlock Text="Custom Tag" Foreground="#AAAAAA" Margin="0,14,0,6"/>
                        <DockPanel>
                            <TextBox x:Name="CustomTagText" DockPanel.Dock="Left" />
                            <Button Content="Add" Click="AddCustomTag_Click"/>
                            <Button Content="Clear" Click="ClearTagSelection_Click"/>
                        </DockPanel>

                        <TextBlock Text="Current Tags" Foreground="#AAAAAA" Margin="0,14,0,6"/>
                        <TextBlock x:Name="CurrentTagsText" Text="(No tags selected)" Foreground="#777777"/>
                    </StackPanel>
                </ScrollViewer>
            </Grid>
        </Border>

    </Grid>
</Window>
