<Window x:Class="PlayCutWin.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Play Cut"
        Width="1100" Height="720"
        MinWidth="980" MinHeight="640"
        Background="#1E1E1E">

    <Window.Resources>
        <!-- Basic colors -->
        <SolidColorBrush x:Key="PanelBg" Color="#242424"/>
        <SolidColorBrush x:Key="PanelBorder" Color="#343434"/>
        <SolidColorBrush x:Key="TextPrimary" Color="#FFFFFF"/>
        <SolidColorBrush x:Key="TextSecondary" Color="#BEBEBE"/>
        <SolidColorBrush x:Key="Accent" Color="#2D67FF"/>
        <SolidColorBrush x:Key="ButtonBg" Color="#2A2A2A"/>
        <SolidColorBrush x:Key="ButtonBorder" Color="#3A3A3A"/>

        <!-- Common styles -->
        <Style x:Key="Card" TargetType="Border">
            <Setter Property="Background" Value="{StaticResource PanelBg}"/>
            <Setter Property="BorderBrush" Value="{StaticResource PanelBorder}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="CornerRadius" Value="10"/>
            <Setter Property="Padding" Value="12"/>
            <Setter Property="Margin" Value="8"/>
        </Style>

        <Style x:Key="DarkButton" TargetType="Button">
            <Setter Property="Background" Value="{StaticResource ButtonBg}"/>
            <Setter Property="BorderBrush" Value="{StaticResource ButtonBorder}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Foreground" Value="{StaticResource TextPrimary}"/>
            <Setter Property="Padding" Value="10,6"/>
            <Setter Property="Margin" Value="0,0,8,0"/>
            <Setter Property="MinWidth" Value="64"/>
            <Setter Property="Height" Value="28"/>
        </Style>

        <Style x:Key="PrimaryButton" TargetType="Button" BasedOn="{StaticResource DarkButton}">
            <Setter Property="Background" Value="{StaticResource Accent}"/>
            <Setter Property="BorderBrush" Value="{StaticResource Accent}"/>
        </Style>

        <Style x:Key="SectionTitle" TargetType="TextBlock">
            <Setter Property="Foreground" Value="{StaticResource TextPrimary}"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Margin" Value="0,0,0,8"/>
        </Style>

        <Style x:Key="SmallLabel" TargetType="TextBlock">
            <Setter Property="Foreground" Value="{StaticResource TextSecondary}"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="Margin" Value="0,0,0,6"/>
        </Style>
    </Window.Resources>

    <Grid Margin="8">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="3*"/>
            <ColumnDefinition Width="2*"/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="3*"/>
            <RowDefinition Height="2*"/>
        </Grid.RowDefinitions>

        <!-- ================= Left: Video ================= -->
        <Border Grid.Row="0" Grid.Column="0" Style="{StaticResource Card}">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <DockPanel Grid.Row="0" LastChildFill="True" Margin="0,0,0,10">
                    <TextBlock Text="Video (16:9)" Foreground="{StaticResource TextPrimary}" FontWeight="SemiBold" FontSize="14"/>
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" DockPanel.Dock="Right">
                        <TextBlock Text="Team A" Foreground="{StaticResource TextSecondary}" VerticalAlignment="Center" Margin="0,0,8,0"/>
                        <TextBox x:Name="TeamATextBox" Width="160" Height="26" Margin="0,0,16,0"
                                 Background="#2A2A2A" Foreground="{StaticResource TextPrimary}" BorderBrush="{StaticResource ButtonBorder}" />
                        <TextBlock Text="Team B" Foreground="{StaticResource TextSecondary}" VerticalAlignment="Center" Margin="0,0,8,0"/>
                        <TextBox x:Name="TeamBTextBox" Width="160" Height="26"
                                 Background="#2A2A2A" Foreground="{StaticResource TextPrimary}" BorderBrush="{StaticResource ButtonBorder}" />
                    </StackPanel>
                </DockPanel>

                <Grid Grid.Row="1">
                    <Border Background="#141414" CornerRadius="10" BorderBrush="{StaticResource PanelBorder}" BorderThickness="1">
                        <Grid>
                            <MediaElement x:Name="Player"
                                          LoadedBehavior="Manual"
                                          UnloadedBehavior="Manual"
                                          Stretch="Uniform"
                                          MediaOpened="Player_MediaOpened"
                                          MediaFailed="Player_MediaFailed"/>

                            <TextBlock x:Name="VideoHint"
                                       Text="Load video from the button â†’"
                                       Foreground="{StaticResource TextSecondary}"
                                       HorizontalAlignment="Center"
                                       VerticalAlignment="Center"
                                       FontSize="14"/>
                        </Grid>
                    </Border>
                </Grid>
            </Grid>
        </Border>

        <!-- ================= Right: Clips ================= -->
        <Border Grid.Row="0" Grid.Column="1" Style="{StaticResource Card}">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <!-- header row -->
                <Grid Grid.Row="0" Margin="0,0,0,10">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <TextBlock Text="Clips (Total 0)" Style="{StaticResource SectionTitle}" Margin="0"/>

                    <StackPanel Grid.Column="1" Orientation="Horizontal" HorizontalAlignment="Right">
                        <ComboBox x:Name="ClipFilterComboBox" Width="140" Height="28" Margin="0,0,8,0"
                                  Background="#2A2A2A" Foreground="{StaticResource TextPrimary}" BorderBrush="{StaticResource ButtonBorder}">
                            <ComboBoxItem Content="All Clips" IsSelected="True"/>
                        </ComboBox>
                        <Button Style="{StaticResource DarkButton}" Content="Import CSV" Click="ImportCsv_Click"/>
                        <Button Style="{StaticResource DarkButton}" Content="Export CSV" Click="ExportCsv_Click"/>
                        <Button Style="{StaticResource DarkButton}" Content="Export All" Click="ExportAll_Click"/>
                        <Button Style="{StaticResource PrimaryButton}" Content="Load Video" Click="LoadVideo_Click" Margin="0"/>
                    </StackPanel>
                </Grid>

                <Grid Grid.Row="1">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <Border Grid.Column="0" Background="#141414" CornerRadius="10" BorderBrush="{StaticResource PanelBorder}" BorderThickness="1" Margin="0,0,8,0" Padding="10">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>
                            <TextBlock Text="Team A Clips (0)" Foreground="{StaticResource TextSecondary}" FontSize="12" Margin="0,0,0,6"/>
                            <ListView Grid.Row="1" x:Name="TeamAClipsList" Background="#101010" Foreground="{StaticResource TextPrimary}" BorderBrush="{StaticResource PanelBorder}">
                                <ListView.View>
                                    <GridView>
                                        <GridViewColumn Header="Start" Width="80"/>
                                        <GridViewColumn Header="End" Width="80"/>
                                    </GridView>
                                </ListView.View>
                            </ListView>
                        </Grid>
                    </Border>

                    <Border Grid.Column="1" Background="#141414" CornerRadius="10" BorderBrush="{StaticResource PanelBorder}" BorderThickness="1" Padding="10">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>
                            <TextBlock Text="Team B Clips (0)" Foreground="{StaticResource TextSecondary}" FontSize="12" Margin="0,0,0,6"/>
                            <ListView Grid.Row="1" x:Name="TeamBClipsList" Background="#101010" Foreground="{StaticResource TextPrimary}" BorderBrush="{StaticResource PanelBorder}">
                                <ListView.View>
                                    <GridView>
                                        <GridViewColumn Header="Start" Width="80"/>
                                        <GridViewColumn Header="End" Width="80"/>
                                    </GridView>
                                </ListView.View>
                            </ListView>
                        </Grid>
                    </Border>
                </Grid>
            </Grid>
        </Border>

        <!-- ================= Left Bottom: Controls ================= -->
        <Border Grid.Row="1" Grid.Column="0" Style="{StaticResource Card}">
            <StackPanel>
                <TextBlock Text="Controls" Style="{StaticResource SectionTitle}"/>

                <TextBlock Text="Load a video to show the timeline slider here." Style="{StaticResource SmallLabel}"/>
                <Slider x:Name="TimelineSlider" Minimum="0" Maximum="1" Value="0" Height="24"
                        ValueChanged="TimelineSlider_ValueChanged"
                        PreviewMouseDown="TimelineSlider_PreviewMouseDown"
                        PreviewMouseUp="TimelineSlider_PreviewMouseUp"/>

                <TextBlock Text="Playback Speed" Style="{StaticResource SmallLabel}" Margin="0,10,0,6"/>

                <WrapPanel>
                    <Button x:Name="Speed025Button" Style="{StaticResource DarkButton}" Content="0.25x" Click="Speed025_Click"/>
                    <Button x:Name="Speed05Button"  Style="{StaticResource DarkButton}" Content="0.5x"  Click="Speed05_Click"/>
                    <Button x:Name="Speed1Button"   Style="{StaticResource DarkButton}" Content="1x"    Click="Speed1_Click"/>
                    <Button x:Name="Speed2Button"   Style="{StaticResource DarkButton}" Content="2x"    Click="Speed2_Click" Margin="0"/>
                </WrapPanel>

                <WrapPanel Margin="0,6,0,0">
                    <Button Style="{StaticResource DarkButton}" Content="-5s" Click="SeekMinus5_Click"/>
                    <Button Style="{StaticResource DarkButton}" Content="-1s" Click="SeekMinus1_Click"/>
                    <Button Style="{StaticResource PrimaryButton}" Content="Play" Click="PlayPause_Click"/>
                    <Button Style="{StaticResource DarkButton}" Content="+1s" Click="SeekPlus1_Click"/>
                    <Button Style="{StaticResource DarkButton}" Content="+5s" Click="SeekPlus5_Click" Margin="0"/>
                </WrapPanel>

                <TextBlock Text="Clip Range" Style="{StaticResource SectionTitle}" Margin="0,12,0,8"/>

                <WrapPanel>
                    <Button Style="{StaticResource DarkButton}" Content="Clip START" Click="ClipStart_Click"/>
                    <Button Style="{StaticResource DarkButton}" Content="Clip END" Click="ClipEnd_Click"/>
                    <Button Style="{StaticResource DarkButton}" Content="Save Team A" Click="SaveTeamA_Click"/>
                    <Button Style="{StaticResource DarkButton}" Content="Save Team B" Click="SaveTeamB_Click" Margin="0"/>
                </WrapPanel>

                <TextBlock x:Name="StatusText" Text="Ready" Foreground="{StaticResource TextSecondary}" Margin="0,10,0,0"/>
                <TextBlock x:Name="ClipRangeText" Text="START: 0.00   END: 0.00" Foreground="{StaticResource TextSecondary}" Margin="0,4,0,0"/>
            </StackPanel>
        </Border>

        <!-- ================= Right Bottom: Tags ================= -->
        <Border Grid.Row="1" Grid.Column="1" Style="{StaticResource Card}">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <DockPanel Grid.Row="0" LastChildFill="True" Margin="0,0,0,10">
                    <TextBlock Text="Tags" Style="{StaticResource SectionTitle}" Margin="0"/>
                    <Button Content="Preferences..." Style="{StaticResource DarkButton}" DockPanel.Dock="Right" Margin="0" Click="Preferences_Click"/>
                </DockPanel>

                <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
                    <StackPanel>
                        <TextBlock Text="Offense Tags" Style="{StaticResource SmallLabel}" Margin="0,0,0,6"/>
                        <WrapPanel>
                            <Button Style="{StaticResource DarkButton}" Content="Transition" Click="Tag_Click"/>
                            <Button Style="{StaticResource DarkButton}" Content="Set" Click="Tag_Click"/>
                            <Button Style="{StaticResource DarkButton}" Content="PnR" Click="Tag_Click"/>
                            <Button Style="{StaticResource DarkButton}" Content="BLOB" Click="Tag_Click"/>
                            <Button Style="{StaticResource DarkButton}" Content="SLOB" Click="Tag_Click" Margin="0"/>
                        </WrapPanel>

                        <WrapPanel Margin="0,8,0,0">
                            <Button Style="{StaticResource DarkButton}" Content="vs M/M" Click="Tag_Click"/>
                            <Button Style="{StaticResource DarkButton}" Content="vs Zone" Click="Tag_Click"/>
                            <Button Style="{StaticResource DarkButton}" Content="2nd Attack" Click="Tag_Click"/>
                            <Button Style="{StaticResource DarkButton}" Content="3rd Attack more" Click="Tag_Click" Margin="0"/>
                        </WrapPanel>

                        <TextBlock Text="Defense Tags" Style="{StaticResource SmallLabel}" Margin="0,14,0,6"/>
                        <WrapPanel>
                            <Button Style="{StaticResource DarkButton}" Content="M/M" Click="Tag_Click"/>
                            <Button Style="{StaticResource DarkButton}" Content="Zone" Click="Tag_Click"/>
                            <Button Style="{StaticResource DarkButton}" Content="Rebound" Click="Tag_Click"/>
                            <Button Style="{StaticResource DarkButton}" Content="Steal" Click="Tag_Click" Margin="0"/>
                        </WrapPanel>

                        <TextBlock Text="Custom Tag" Style="{StaticResource SmallLabel}" Margin="0,14,0,6"/>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>

                            <TextBox x:Name="CustomTagTextBox" Height="28" Grid.Column="0"
                                     Background="#2A2A2A" Foreground="{StaticResource TextPrimary}" BorderBrush="{StaticResource ButtonBorder}"
                                     Margin="0,0,8,0"/>
                            <Button Grid.Column="1" Style="{StaticResource DarkButton}" Content="Add" Click="AddCustomTag_Click"/>
                            <Button Grid.Column="2" Style="{StaticResource DarkButton}" Content="Clear" Click="ClearCustomTag_Click" Margin="0"/>
                        </Grid>

                        <TextBlock Text="Current Tags" Style="{StaticResource SmallLabel}" Margin="0,14,0,6"/>
                        <TextBlock x:Name="CurrentTagsText" Text="(No tags selected)" Foreground="{StaticResource TextSecondary}"/>
                    </StackPanel>
                </ScrollViewer>
            </Grid>
        </Border>
    </Grid>
</Window>
