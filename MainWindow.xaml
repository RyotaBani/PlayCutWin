<Window x:Class="PlayCutWin.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:PlayCutWin"
        mc:Ignorable="d"
        Title="PlayCutWin" Width="1400" Height="850" Background="#121212">

    <Grid Margin="10">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="3*"/>
            <ColumnDefinition Width="2*"/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Top Left Title -->
        <TextBlock x:Name="TopLeftTitle"
                   Grid.Column="0" Grid.Row="0"
                   Foreground="White"
                   FontSize="16"
                   FontWeight="SemiBold"
                   Text="Video (16:9)"
                   Margin="0,0,0,8"/>

        <!-- Top Right Toolbar (right aligned) -->
        <StackPanel Grid.Column="1" Grid.Row="0"
                    Orientation="Horizontal"
                    HorizontalAlignment="Right"
                    VerticalAlignment="Center"
                    Margin="0,0,0,8">
            <ComboBox x:Name="FilterCombo" Width="140" Height="28" Margin="0,0,8,0"
                      Background="#1E1E1E" Foreground="White"/>
            <Button Content="Import CSV" Width="90" Height="28" Margin="0,0,6,0" Click="ImportCsv_Click"/>
            <Button Content="Export CSV" Width="90" Height="28" Margin="0,0,6,0" Click="ExportCsv_Click"/>
            <Button Content="Export All" Width="90" Height="28" Margin="0,0,6,0" Click="ExportAll_Click"/>
            <Button Content="Load Video" Width="90" Height="28" Background="#2D7DFF" Foreground="White" Click="LoadVideo_Click"/>
        </StackPanel>

        <!-- Left Panel -->
        <Grid Grid.Column="0" Grid.Row="1">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Team Inputs -->
            <Grid Grid.Row="0" Margin="0,0,0,8">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="260"/>
                    <ColumnDefinition Width="40"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="260"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <TextBlock Grid.Column="0" Foreground="#BDBDBD" VerticalAlignment="Center" Text="Team A" Margin="0,0,8,0"/>
                <TextBox x:Name="TeamABox" Grid.Column="1" Height="28"
                         Background="#1E1E1E" Foreground="#BDBDBD" BorderBrush="#333" BorderThickness="1"
                         GotFocus="TeamBox_GotFocus" LostFocus="TeamBox_LostFocus" PreviewMouseLeftButtonDown="TeamBox_PreviewMouseLeftButtonDown"/>

                <TextBlock Grid.Column="3" Foreground="#BDBDBD" VerticalAlignment="Center" Text="Team B" Margin="0,0,8,0"/>
                <TextBox x:Name="TeamBBox" Grid.Column="4" Height="28"
                         Background="#1E1E1E" Foreground="#BDBDBD" BorderBrush="#333" BorderThickness="1"
                         GotFocus="TeamBox_GotFocus" LostFocus="TeamBox_LostFocus" PreviewMouseLeftButtonDown="TeamBox_PreviewMouseLeftButtonDown"/>
            </Grid>

            <!-- Video -->
            <Border Grid.Row="1" Background="#0E0E0E" CornerRadius="12" BorderBrush="#2A2A2A" BorderThickness="1">
                <Grid>
                    <MediaElement x:Name="Player" LoadedBehavior="Manual" UnloadedBehavior="Manual"
                                  MediaOpened="Player_MediaOpened" MediaFailed="Player_MediaFailed"/>
                    <TextBlock x:Name="VideoHint" Text="Load a video to begin"
                               Foreground="#8F8F8F" FontSize="14"
                               HorizontalAlignment="Center" VerticalAlignment="Center"/>
                </Grid>
            </Border>

            <!-- Controls -->
            <Border Grid.Row="2" Margin="0,8,0,0" Background="#151515" CornerRadius="12" BorderBrush="#2A2A2A" BorderThickness="1" Padding="10">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <StackPanel Grid.Row="0" Orientation="Horizontal" VerticalAlignment="Center">
                        <TextBlock Foreground="#BDBDBD" VerticalAlignment="Center" Text="Playback Speed" Margin="0,0,10,0"/>
                        <Button Content="0.25x" Width="60" Margin="0,0,6,0" Click="Speed025_Click"/>
                        <Button Content="0.5x" Width="60" Margin="0,0,6,0" Click="Speed05_Click"/>
                        <Button Content="1x" Width="60" Margin="0,0,6,0" Click="Speed1_Click"/>
                        <Button Content="2x" Width="60" Margin="0,0,6,0" Click="Speed2_Click"/>
                    </StackPanel>

                    <StackPanel Grid.Row="1" Orientation="Horizontal" Margin="0,8,0,0">
                        <Button Content="-5s" Width="60" Margin="0,0,6,0" Click="Minus5_Click"/>
                        <Button Content="-1s" Width="60" Margin="0,0,6,0" Click="Minus1_Click"/>
                        <Button x:Name="PlayButton" Content="â–¶" Width="60" Background="#2D7DFF" Foreground="White" Margin="0,0,6,0" Click="PlayPause_Click"/>
                        <Button Content="+1s" Width="60" Margin="0,0,6,0" Click="Plus1_Click"/>
                        <Button Content="+5s" Width="60" Margin="0,0,6,0" Click="Plus5_Click"/>
                    </StackPanel>

                    <Grid Grid.Row="2" Margin="0,10,0,0">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="20"/>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>

                        <Button Grid.Column="0" Content="Clip START" Width="110" Click="ClipStart_Click"/>
                        <TextBlock Grid.Column="1" x:Name="StartLabel" Foreground="#BDBDBD" VerticalAlignment="Center" Margin="8,0,0,0" Text="START: --:--"/>
                        <Button Grid.Column="3" Content="Clip END" Width="110" Click="ClipEnd_Click"/>
                        <TextBlock Grid.Column="4" x:Name="EndLabel" Foreground="#BDBDBD" VerticalAlignment="Center" Margin="8,0,0,0" Text="END: --:--"/>

                        <StackPanel Grid.Column="6" Orientation="Horizontal" HorizontalAlignment="Right">
                            <Button Content="Save Team A" Width="110" Margin="0,0,6,0" Click="SaveTeamA_Click"/>
                            <Button Content="Save Team B" Width="110" Click="SaveTeamB_Click"/>
                        </StackPanel>
                    </Grid>
                </Grid>
            </Border>
        </Grid>

        <!-- Right Panel -->
        <Grid Grid.Column="1" Grid.Row="1">
            <Grid.RowDefinitions>
                <RowDefinition Height="2*"/>
                <RowDefinition Height="3*"/>
            </Grid.RowDefinitions>

            <!-- Clips -->
            <Border Grid.Row="0" Background="#151515" CornerRadius="12" BorderBrush="#2A2A2A" BorderThickness="1" Padding="10">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <TextBlock x:Name="ClipsTitle" Foreground="White" FontWeight="SemiBold" Text="Clips" Margin="0,0,0,8"/>

                    <Grid Grid.Row="1">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="10"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <StackPanel Grid.Column="0">
                            <TextBlock Foreground="#BDBDBD" Text="Team A Clips" Margin="0,0,0,4"/>
                            <DataGrid x:Name="TeamAList" AutoGenerateColumns="False" HeadersVisibility="Column"
                                      Background="#0F0F0F" Foreground="White" BorderBrush="#2A2A2A"
                                      CanUserAddRows="False" IsReadOnly="True"
                                      MouseDoubleClick="ClipGrid_DoubleClick"
                                      SelectionChanged="ClipGrid_SelectionChanged">
                                <DataGrid.Columns>
                                    <DataGridTextColumn Header="Team" Binding="{Binding Team}" Width="60"/>
                                    <DataGridTextColumn Header="Start" Binding="{Binding StartDisplay}" Width="80"/>
                                    <DataGridTextColumn Header="End" Binding="{Binding EndDisplay}" Width="80"/>
                                    <DataGridTextColumn Header="Tags" Binding="{Binding Tags}" Width="*"/>
                                </DataGrid.Columns>
                            </DataGrid>
                        </StackPanel>

                        <StackPanel Grid.Column="2">
                            <TextBlock Foreground="#BDBDBD" Text="Team B Clips" Margin="0,0,0,4"/>
                            <DataGrid x:Name="TeamBList" AutoGenerateColumns="False" HeadersVisibility="Column"
                                      Background="#0F0F0F" Foreground="White" BorderBrush="#2A2A2A"
                                      CanUserAddRows="False" IsReadOnly="True"
                                      MouseDoubleClick="ClipGrid_DoubleClick"
                                      SelectionChanged="ClipGrid_SelectionChanged">
                                <DataGrid.Columns>
                                    <DataGridTextColumn Header="Team" Binding="{Binding Team}" Width="60"/>
                                    <DataGridTextColumn Header="Start" Binding="{Binding StartDisplay}" Width="80"/>
                                    <DataGridTextColumn Header="End" Binding="{Binding EndDisplay}" Width="80"/>
                                    <DataGridTextColumn Header="Tags" Binding="{Binding Tags}" Width="*"/>
                                </DataGrid.Columns>
                            </DataGrid>
                        </StackPanel>
                    </Grid>

                    <StackPanel Grid.Row="2" Margin="0,10,0,0">
                        <TextBlock Foreground="#BDBDBD" Text="Clip Note"/>
                        <TextBox x:Name="ClipNoteBox" Height="60" AcceptsReturn="True"
                                 Background="#0F0F0F" Foreground="White" BorderBrush="#2A2A2A" TextWrapping="Wrap"
                                 TextChanged="ClipNoteBox_TextChanged"/>

                        <TextBlock Foreground="#BDBDBD" Text="Set Play" Margin="0,8,0,0"/>
                        <TextBox x:Name="SetPlayBox" Height="28"
                                 Background="#0F0F0F" Foreground="White" BorderBrush="#2A2A2A"
                                 TextChanged="SetPlayBox_TextChanged"/>
                    </StackPanel>
                </Grid>
            </Border>

            <!-- Tags -->
            <Border Grid.Row="1" Margin="0,10,0,0" Background="#151515" CornerRadius="12" BorderBrush="#2A2A2A" BorderThickness="1" Padding="10">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <TextBlock Foreground="White" FontWeight="SemiBold" Text="Tags" Margin="0,0,0,8"/>

                    <WrapPanel Grid.Row="1" Margin="0,0,0,8">
                        <ToggleButton Content="Transition" Margin="0,0,6,6" Click="TagToggle_Click"/>
                        <ToggleButton Content="Set" Margin="0,0,6,6" Click="TagToggle_Click"/>
                        <ToggleButton Content="PnR" Margin="0,0,6,6" Click="TagToggle_Click"/>
                        <ToggleButton Content="BLOB" Margin="0,0,6,6" Click="TagToggle_Click"/>
                        <ToggleButton Content="SLOB" Margin="0,0,6,6" Click="TagToggle_Click"/>
                        <ToggleButton Content="vs M/M" Margin="0,0,6,6" Click="TagToggle_Click"/>
                        <ToggleButton Content="vs Zone" Margin="0,0,6,6" Click="TagToggle_Click"/>
                        <ToggleButton Content="2nd Attack" Margin="0,0,6,6" Click="TagToggle_Click"/>
                        <ToggleButton Content="3rd Attack more" Margin="0,0,6,6" Click="TagToggle_Click"/>
                        <ToggleButton Content="M/M" Margin="0,0,6,6" Click="TagToggle_Click"/>
                        <ToggleButton Content="Zone" Margin="0,0,6,6" Click="TagToggle_Click"/>
                        <ToggleButton Content="Rebound" Margin="0,0,6,6" Click="TagToggle_Click"/>
                        <ToggleButton Content="Steal" Margin="0,0,6,6" Click="TagToggle_Click"/>
                    </WrapPanel>

                    <Grid Grid.Row="2" Margin="0,0,0,8">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="80"/>
                            <ColumnDefinition Width="80"/>
                        </Grid.ColumnDefinitions>

                        <TextBox x:Name="CustomTagBox" Grid.Column="0" Height="28"
                                 Background="#0F0F0F" Foreground="White" BorderBrush="#2A2A2A"/>
                        <Button Grid.Column="1" Content="Add" Margin="6,0,6,0" Click="AddCustomTag_Click"/>
                        <Button Grid.Column="2" Content="Clear" Click="ClearTags_Click"/>
                    </Grid>

                    <StackPanel Grid.Row="3">
                        <TextBlock Foreground="#BDBDBD" Text="Current Tags"/>
                        <TextBlock x:Name="CurrentTagsText" Foreground="White" Text="(No tags selected)" Margin="0,4,0,0"/>
                    </StackPanel>
                </Grid>
            </Border>
        </Grid>
    </Grid>
</Window>
