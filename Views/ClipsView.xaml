<UserControl x:Class="PlayCutWin.Views.ClipsView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d"
             Background="Transparent">

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="14"/>
            <ColumnDefinition Width="420"/>
        </Grid.ColumnDefinitions>

        <!-- Left: Imported videos -->
        <Border Grid.Column="0" Background="#1c1c1c" CornerRadius="12" Padding="14">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="10"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <DockPanel>
                    <TextBlock Text="Imported Videos" Foreground="White" FontWeight="Bold" FontSize="16" />
                    <TextBlock Text="{Binding ImportedVideos.Count, StringFormat=Count: {0}}"
                               Foreground="#bdbdbd" Margin="10,0,0,0" VerticalAlignment="Bottom"/>
                </DockPanel>

                <DataGrid x:Name="VideosGrid"
                          Grid.Row="2"
                          AutoGenerateColumns="False"
                          HeadersVisibility="Column"
                          IsReadOnly="True"
                          SelectionMode="Single"
                          SelectionChanged="VideosGrid_SelectionChanged">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="Name" Binding="{Binding Name}" Width="2*"/>
                        <DataGridTextColumn Header="Path" Binding="{Binding Path}" Width="3*"/>
                    </DataGrid.Columns>
                </DataGrid>
            </Grid>
        </Border>

        <!-- Right: Player -->
        <Border Grid.Column="2" Background="#1c1c1c" CornerRadius="12" Padding="14">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="10"/>
                    <RowDefinition Height="220"/>
                    <RowDefinition Height="10"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="10"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <TextBlock Text="{Binding SelectedVideoPath, StringFormat=Selected: {0}}"
                           Foreground="#d0d0d0"
                           TextWrapping="Wrap"/>

                <Border Grid.Row="2" Background="#0f0f0f" CornerRadius="10" Padding="8">
                    <MediaElement x:Name="Player"
                                  LoadedBehavior="Manual"
                                  UnloadedBehavior="Manual"
                                  Stretch="Uniform"/>
                </Border>

                <!-- Seek -->
                <StackPanel Grid.Row="4" Orientation="Horizontal" VerticalAlignment="Center">
                    <Slider x:Name="SeekSlider"
                            Width="280"
                            Minimum="0"
                            Maximum="1"
                            ValueChanged="SeekSlider_ValueChanged"
                            PreviewMouseLeftButtonDown="SeekSlider_PreviewMouseLeftButtonDown"
                            PreviewMouseLeftButtonUp="SeekSlider_PreviewMouseLeftButtonUp"/>
                    <TextBlock Text="{Binding PlaybackPositionText}" Foreground="#d0d0d0" Margin="10,0,0,0" Width="60"/>
                    <TextBlock Text="/" Foreground="#888" Margin="6,0"/>
                    <TextBlock Text="{Binding PlaybackDurationText}" Foreground="#d0d0d0" Width="60"/>
                </StackPanel>

                <!-- Controls -->
                <WrapPanel Grid.Row="6">
                    <Button Content="Play" Width="90" Margin="0,0,8,0" Click="Play_Click"/>
                    <Button Content="Pause" Width="90" Margin="0,0,8,0" Click="Pause_Click"/>
                    <Button Content="Stop" Width="90" Margin="0,0,14,0" Click="Stop_Click"/>

                    <Button Content="-0.5s" Width="90" Margin="0,0,8,0" Click="Minus05_Click"/>
                    <Button Content="+0.5s" Width="90" Click="Plus05_Click"/>
                </WrapPanel>
            </Grid>
        </Border>
    </Grid>
</UserControl>
